
create table if not exists tasks
(
    task_id     int auto_increment
    primary key,
    user_id     int                                                         not null,
    title       varchar(100)                                                not null,
    description text                                                        null,
    priority    enum ('高', '中', '低')           default '中'              null,
    due_date    datetime                                                    not null,
    status      enum ('待办', '进行中', '已完成') default '待办'            null,
    deleted     tinyint(1)                        default 0                 null,
    delete_time datetime                                                    null,
    create_time datetime                          default CURRENT_TIMESTAMP null
    );

create table if not exists user
(
    user_id  int auto_increment
    primary key,
    username varchar(50)                           not null,
    password varchar(50)                           not null,
    email    varchar(100)                          not null,
    role     enum ('admin', 'user') default 'user' not null,
    constraint username
    unique (username)
    );



-- 清空表
TRUNCATE TABLE tasks;
TRUNCATE TABLE user;

-- 重置自增ID
ALTER TABLE tasks AUTO_INCREMENT = 1;
ALTER TABLE user AUTO_INCREMENT = 1;

-- 插入用户数据
INSERT INTO user (username, password, email, role) VALUES
                                                       ('admin_user', 'admin@2025!', 'admin@taskmgr.com', 'admin'),
                                                       ('dev_emma', 'dev@pass123', 'emma.dev@tech.io', 'user'),
                                                       ('design_mark', 'design!Mark25', 'mark@design.com', 'user'),
                                                       ('test_lisa', 'test$QA2025', 'lisa@quality.com', 'user'),
                                                       ('pm_james', 'PM#Secure2025', 'james.project@pm.com', 'admin'),
                                                       ('support_amy', 'HelpDesk@2025', 'amy.support@company.com', 'user'),
                                                       ('ops_david', 'Ops#Secure1', 'david.ops@infra.com', 'user');

-- 插入任务数据（修正列数不匹配问题）
-- 普通任务（非删除）
INSERT INTO tasks (user_id, title, description, priority, due_date, status) VALUES
                                                                                (1, 'Q2财报会议安排', '组织第二季度财务报告会议，邀请相关股东', '高', '2025-06-10 10:00:00', '进行中'),
                                                                                (1, '系统安全审计', '完成年度系统安全审计报告', '高', '2025-06-15 15:00:00', '待办'),
                                                                                (1, '团队绩效评估', '完成团队成员季度绩效评估', '中', '2025-06-12 14:00:00', '待办'),
                                                                                (1, '年度预算规划', '起草2026年部门预算计划', '高', '2025-06-18 09:00:00', '待办'),
                                                                                (1, '供应商合同更新', '更新主要供应商服务合同', '中', '2025-06-09 16:00:00', '已完成'),
                                                                                (2, '用户认证模块优化', '重构用户认证模块以提高安全性', '高', '2025-06-11 11:30:00', '进行中'),
                                                                                (2, 'API速率限制', '实现API请求速率限制功能', '中', '2025-06-13 10:00:00', '进行中'),
                                                                                (2, '单元测试覆盖率', '将代码覆盖率提升至85%以上', '中', '2025-06-17 16:00:00', '待办'),
                                                                                (2, '错误日志分析', '分析最近一周的系统错误日志', '低', '2025-06-09 15:00:00', '已完成'),
                                                                                (2, '开发文档更新', '更新开发人员入职文档', '低', '2025-06-19 13:00:00', '待办'),
                                                                                (3, '新仪表板设计', '创建新管理仪表板的UI设计', '高', '2025-06-10 14:00:00', '进行中'),
                                                                                (3, '移动端适配优化', '优化移动端界面的响应式设计', '中', '2025-06-14 11:00:00', '进行中'),
                                                                                (3, '设计系统更新', '向设计系统添加新组件', '中', '2025-06-16 15:00:00', '待办'),
                                                                                (3, '用户反馈分析', '分析上月收集的用户体验反馈', '低', '2025-06-08 10:00:00', '已完成'),
                                                                                (3, '品牌颜色微调', '根据市场反馈调整品牌主色调', '低', '2025-06-20 09:00:00', '待办'),
                                                                                (4, '回归测试计划', '制定6月产品发布回归测试计划', '高', '2025-06-09 13:00:00', '已完成'),
                                                                                (4, '自动化测试改进', '改进登录流程的自动化测试', '中', '2025-06-11 16:30:00', '进行中'),
                                                                                (4, '性能测试', '执行产品新版本的性能测试', '高', '2025-06-12 09:00:00', '待办'),
                                                                                (4, '测试环境配置', '配置新功能的测试环境', '中', '2025-06-13 14:00:00', '进行中'),
                                                                                (4, '漏洞复现', '尝试复现用户报告的5个主要漏洞', '高', '2025-06-17 10:00:00', '待办'),
                                                                                (5, '项目里程碑审查', '审查所有进行中项目的里程碑', '高', '2025-06-10 09:30:00', '进行中'),
                                                                                (5, '客户汇报准备', '准备下周客户会议的材料', '高', '2025-06-11 14:00:00', '进行中'),
                                                                                (5, '团队资源分配', '重新分配团队成员到不同项目', '中', '2025-06-13 11:00:00', '待办'),
                                                                                (5, '风险管理计划', '更新项目风险管理计划', '中', '2025-06-15 10:00:00', '待办'),
                                                                                (5, '项目总结会议', '组织已完成项目的总结会议', '低', '2025-06-09 15:30:00', '已完成'),
                                                                                (6, '知识库更新', '更新支持团队的知识库文章', '中', '2025-06-10 13:00:00', '进行中'),
                                                                                (6, '工单系统优化', '建议并实施工单系统改进', '中', '2025-06-12 15:00:00', '待办'),
                                                                                (6, '客户满意度调查', '分析和报告上季度客户满意度', '中', '2025-06-11 10:00:00', '进行中'),
                                                                                (6, '新员工培训', '培训新加入的支持团队成员', '低', '2025-06-09 11:00:00', '已完成'),
                                                                                (6, '高峰时段计划', '为即将到来的高峰时段制定计划', '中', '2025-06-18 16:00:00', '待办'),
                                                                                (7, '服务器维护', '执行服务器常规维护', '高', '2025-06-09 22:00:00', '已完成'),
                                                                                (7, '备份系统检查', '检查并验证所有备份系统', '高', '2025-06-11 10:00:00', '进行中'),
                                                                                (7, '监控系统升级', '升级服务器监控系统', '中', '2025-06-15 13:00:00', '待办'),
                                                                                (7, '灾难恢复测试', '执行灾难恢复计划测试', '高', '2025-06-17 09:00:00', '待办'),
                                                                                (7, '证书更新', '更新将于6月底到期的SSL证书', '高', '2025-06-20 14:00:00', '待办');

-- 单独插入已删除的任务（使用完整的列列表）
INSERT INTO tasks (user_id, title, description, priority, due_date, status, deleted, delete_time) VALUES
                                                                                                      (2, '废弃模块清理', '清理不再使用的旧代码模块', '低', '2025-05-25 14:00:00', '已完成', 1, '2025-05-28 10:00:00'),
                                                                                                      (3, '旧版设计稿归档', '将不再使用的旧设计稿归档', '低', '2025-05-20 10:00:00', '已完成', 1, '2025-05-27 16:00:00'),
                                                                                                      (5, '取消项目文档', '为取消的项目整理文档', '中', '2025-05-22 09:00:00', '已完成', 1, '2025-05-29 11:00:00'),
                                                                                                      (4, '过时测试用例', '移除不再相关的测试用例', '低', '2025-05-18 13:00:00', '已完成', 1, '2025-05-26 15:00:00'),
                                                                                                      (7, '旧服务器退役', '完成旧服务器的退役工作', '中', '2025-05-15 15:00:00', '已完成', 1, '2025-05-20 18:00:00'),
                                                                                                      (6, '客户退出流程', '处理客户退出相关支持文档', '低', '2025-05-30 11:00:00', '已完成', 1, '2025-06-03 10:00:00');